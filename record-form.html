<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="bower_components/paper-input/paper-input.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="bower_components/iron-pages/iron-pages.html">

<dom-module id="record-form">
<style>
:host {
  --paper-toolbar-background: #00bcd4;
}

:host paper-tabs, :host paper-toolbar {
  background-color: #00bcd4;
  color: #fff;
  box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2);
}

:host paper-toolbar paper-tabs {
  box-shadow: none;
}

:host paper-tabs[noink][no-bar] paper-tab.iron-selected {
  color: #ffff8d;
}
</style>
<template>
  <paper-dialog id="{{ ident }}">
    <h2>{{ title }}</h2>
    <paper-tabs selected="{{recordType}}">
      <paper-tab>Data Entry</paper-tab>
      <paper-tab>Doctor Note</paper-tab>
      <paper-tab>Medication</paper-tab>
      <paper-tab>Test Results</paper-tab>
    </paper-tabs>

    <iron-pages selected="{{recordType}}" id="recordform">

      <div class="record-DATA">
        <form is="iron-form" method="post"
              action="/api/patient/{{ patient_id }}/record/0/save">
          <div class="horizontal layout">
            <paper-input name="date_birth" label="Date of birth" value="01.01.1900"></paper-input>
            <input name="sex_code" label="Female" type="radio" value="2" checked>Female
            <input name="sex_code" label="Male" type="radio" value="1">Male
          </div>
        </form>
      </div>

      <div class="record-NOTE">
        <form is="iron-form" method="post"
              action="/api/patient/{{ patient_id }}/record/1/save">
          <div class="vertical layout">
            <paper-input name="subject" label="Summary" required autofocus></paper-input>
            <textarea name="note" label="Note" required rows="6"></textarea>
          </div>
        </form>
      </div>

      <div class="record-MED">
      </div>

      <div class="record-LAB">
      </div>

    </iron-pages>
    <div class="buttons">
      <paper-button dialog-dismiss>Cancel</paper-button>
      <paper-button raised on-tap="saveDialog">Save</paper-button>
    </div>
  </paper-dialog>
</template>
<script>
  Polymer({
    is: 'record-form',

    properties: {
      title: {
        value: "New record",
        reflectToAttribute: true
      },
      recordType: {
        value: 1
      }
    },

    saveDialog: function(e) {
      this.$.recordform.selectedItem.firstElementChild.submit();
      this.$.recordform.selectedItem.firstElementChild.reset();
      this.fire('record-saved');
      document.getElementById(this.ident).close();
    }

  });
</script>
</dom-module>
